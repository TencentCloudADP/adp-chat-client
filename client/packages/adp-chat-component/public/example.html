<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADP Chat Component - HTML Example</title>
    <link rel="stylesheet" href="adp-chat-component.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            width: 100%;
            height: 100%;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        }

        .demo-app {
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            background: #f5f5f5;
        }

        /* Header */
        .demo-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 24px;
            background: #fff;
            border-bottom: 1px solid #e8e8e8;
            flex-shrink: 0;
        }

        .demo-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1a1a1a;
        }

        .demo-tabs {
            display: flex;
            gap: 8px;
        }

        .tab-btn {
            padding: 8px 20px;
            background: transparent;
            border: 1px solid #e8e8e8;
            border-radius: 6px;
            font-size: 14px;
            color: #666;
            cursor: pointer;
            transition: all 0.2s;
        }

        .tab-btn:hover {
            border-color: #0052d9;
            color: #0052d9;
        }

        .tab-btn.active {
            background: #0052d9;
            border-color: #0052d9;
            color: #fff;
        }

        /* Content */
        .demo-content {
            flex: 1;
            min-height: 0;
            overflow: hidden;
            position: relative;
        }

        .demo-panel {
            width: 100%;
            height: 100%;
            display: none;
        }

        .demo-panel.active {
            display: block;
        }

        /* Full Mode */
        .demo-full .chat-container {
            width: 100%;
            height: 100%;
        }

        /* Compact Mode */
        .demo-compact {
            display: none;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 40px;
        }

        .demo-compact.active {
            display: flex;
        }

        .compact-wrapper {
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        /* Popup Mode */
        .demo-popup {
            display: none;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }

        .demo-popup.active {
            display: flex;
        }

        .popup-content {
            text-align: center;
            padding: 40px;
        }

        .popup-content h2 {
            font-size: 2rem;
            color: #333;
            margin-bottom: 16px;
        }

        .popup-content p {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 8px;
        }

        .feature-list {
            display: flex;
            gap: 24px;
            justify-content: center;
            margin-top: 40px;
        }

        .feature-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 20px 24px;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
        }

        .feature-icon {
            font-size: 2rem;
        }

        .feature-item span:last-child {
            font-size: 0.9rem;
            color: #666;
        }

        /* Multi Instance */
        .demo-multi {
            display: none;
            padding: 24px;
            background: #f0f0f0;
        }

        .demo-multi.active {
            display: block;
        }

        .multi-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 24px;
            height: 100%;
        }

        .instance-wrapper {
            background: #fff;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
            display: flex;
            flex-direction: column;
        }

        .instance-header {
            padding: 12px 16px;
            background: #f5f5f5;
            border-bottom: 1px solid #e8e8e8;
            font-weight: 500;
            font-size: 14px;
            color: #333;
            flex-shrink: 0;
        }

        .instance-content {
            flex: 1;
            position: relative;
            min-height: 0;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .demo-header {
                flex-direction: column;
                gap: 12px;
            }

            .demo-tabs {
                flex-wrap: wrap;
                justify-content: center;
            }

            .tab-btn {
                padding: 6px 12px;
                font-size: 12px;
            }

            .multi-container {
                grid-template-columns: 1fr;
            }

            .feature-list {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="demo-app">
        <!-- Header -->
        <header class="demo-header">
            <h1 class="demo-title">ADP Chat Component - HTML Example</h1>
            <nav class="demo-tabs">
                <button class="tab-btn active" data-demo="full">Full Mode</button>
                <button class="tab-btn" data-demo="compact">Compact Mode</button>
                <button class="tab-btn" data-demo="popup">Popup Mode</button>
                <button class="tab-btn" data-demo="multi">Multi Instance</button>
            </nav>
        </header>

        <!-- Content -->
        <main class="demo-content">
            <!-- Full Mode -->
            <div id="panel-full" class="demo-panel demo-full active">
                <div id="chat-full" class="chat-container"></div>
            </div>

            <!-- Compact Mode -->
            <div id="panel-compact" class="demo-panel demo-compact">
                <div class="compact-wrapper">
                    <div id="chat-compact" class="chat-wrapper"></div>
                </div>
            </div>

            <!-- Popup Mode -->
            <div id="panel-popup" class="demo-panel demo-popup">
                <div class="popup-content">
                    <h2>Popup Mode</h2>
                    <p>Click the chat button at the bottom right to open the chat window</p>
                    <p>This mode is suitable for embedding chat functionality in existing pages</p>
                    <div class="feature-list">
                        <div class="feature-item">
                            <span class="feature-icon">ðŸ’¬</span>
                            <span>Floating Button</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">ðŸ“±</span>
                            <span>Fixed Position</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">âœ¨</span>
                            <span>Closable & Minimizable</span>
                        </div>
                    </div>
                </div>
                <div id="chat-popup"></div>
            </div>

            <!-- Multi Instance -->
            <div id="panel-multi" class="demo-panel demo-multi">
                <div class="multi-container">
                    <div class="instance-wrapper">
                        <div class="instance-header">Instance 1 - Light Theme</div>
                        <div id="instance-1" class="instance-content"></div>
                    </div>
                    <div class="instance-wrapper">
                        <div class="instance-header">Instance 2 - Dark Theme</div>
                        <div id="instance-2" class="instance-content"></div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="adp-chat-component.umd.js"></script>
    <script>
        (function() {
            'use strict';

            let currentDemo = 'full';
            const instances = {};

            // Common i18n config
            const commonI18n = {
                sideI18n: {
                    more: 'More',
                    collapse: 'Collapse',
                    today: 'Today',
                    recent: 'Recent',
                    switchTheme: 'Switch Theme',
                    selectLanguage: 'Select Language',
                    logout: 'Logout',
                },
                chatI18n: {
                    loading: 'Loading...',
                    thinking: 'Thinking...',
                    sendError: 'Send failed',
                    networkError: 'Network error',
                },
                chatItemI18n: {
                    thinking: 'Thinking',
                    copy: 'Copy',
                    replay: 'Regenerate',
                    share: 'Share',
                    good: 'Helpful',
                    bad: 'Not helpful',
                },
                senderI18n: {
                    placeholder: 'Type your question...',
                    uploadImg: 'Upload image',
                    answering: 'Answering...',
                },
            };

            // Clear all instances
            function clearInstances() {
                Object.keys(instances).forEach(function(key) {
                    try {
                        ADPChatComponent.unmount(key + '-app');
                    } catch (e) {
                        // ignore
                    }
                    delete instances[key];
                });
            }

            // Initialize Full Mode
            function initFullMode() {
                var instance = ADPChatComponent.init('#chat-full', Object.assign({
                    modelType: 'full',
                    theme: 'light',
                    logoTitle: 'ADP Chat - Full Mode',
                    aiWarningText: 'Content generated by AI, for reference only',
                    createConversationText: 'New Chat',
                }, commonI18n));
                if (instance) instances['chat-full'] = instance;
            }

            // Initialize Compact Mode
            function initCompactMode() {
                var instance = ADPChatComponent.init('#chat-compact', Object.assign({
                    modelType: 'compact',
                    width: 800,
                    height: 600,
                    theme: 'light',
                    logoTitle: 'ADP Chat - Compact',
                    aiWarningText: 'Content generated by AI, for reference only',
                    createConversationText: 'New Chat',
                }, commonI18n));
                if (instance) instances['chat-compact'] = instance;
            }

            // Initialize Popup Mode
            function initPopupMode() {
                var instance = ADPChatComponent.init('#chat-popup', Object.assign({
                    canPark: true,
                    modelType: 'compact',
                    width: 420,
                    height: 620,
                    theme: 'light',
                    logoTitle: 'ADP Chat',
                    aiWarningText: 'Content generated by AI, for reference only',
                    createConversationText: 'New Chat',
                }, commonI18n));
                if (instance) instances['chat-popup'] = instance;
            }

            // Initialize Multi Instance
            function initMultiInstance() {
                // Instance 1: Light theme
                var instance1 = ADPChatComponent.init('#instance-1', Object.assign({
                    modelType: 'full',
                    theme: 'light',
                    logoTitle: 'Light Theme',
                    aiWarningText: 'Content generated by AI, for reference only',
                    createConversationText: 'New Chat',
                }, commonI18n));
                if (instance1) instances['instance-1'] = instance1;

                // Instance 2: Dark theme
                var instance2 = ADPChatComponent.init('#instance-2', Object.assign({
                    modelType: 'full',
                    theme: 'dark',
                    logoTitle: 'Dark Theme',
                    aiWarningText: 'AI generated content',
                    createConversationText: 'New Chat',
                }, commonI18n));
                if (instance2) instances['instance-2'] = instance2;
            }

            // Initialize current demo
            function initCurrentDemo() {
                clearInstances();

                // Small delay to ensure DOM is ready
                setTimeout(function() {
                    switch (currentDemo) {
                        case 'full':
                            initFullMode();
                            break;
                        case 'compact':
                            initCompactMode();
                            break;
                        case 'popup':
                            initPopupMode();
                            break;
                        case 'multi':
                            initMultiInstance();
                            break;
                    }
                }, 100);
            }

            // Switch demo
            function switchDemo(key) {
                if (currentDemo === key) return;
                currentDemo = key;

                // Update tab buttons
                var tabs = document.querySelectorAll('.tab-btn');
                tabs.forEach(function(tab) {
                    if (tab.getAttribute('data-demo') === key) {
                        tab.classList.add('active');
                    } else {
                        tab.classList.remove('active');
                    }
                });

                // Update panels
                var panels = document.querySelectorAll('.demo-panel');
                panels.forEach(function(panel) {
                    if (panel.id === 'panel-' + key) {
                        panel.classList.add('active');
                    } else {
                        panel.classList.remove('active');
                    }
                });

                // Initialize the demo
                initCurrentDemo();
            }

            // Initialize on page load
            window.onload = function() {
                // Bind tab click events
                var tabs = document.querySelectorAll('.tab-btn');
                tabs.forEach(function(tab) {
                    tab.addEventListener('click', function() {
                        var demo = this.getAttribute('data-demo');
                        switchDemo(demo);
                    });
                });

                // Initialize default demo
                initCurrentDemo();
            };
        })();
    </script>
</body>
</html>
