---
title: ChatLayout
description: Complete chat layout component with sidebar and main content area
---

import { PropsTable, EventsTable, SlotsTable, MethodsTable } from '@/components/docs/api-table';

# ChatLayout

Complete chat layout component with sidebar and main content area, supports API mode for automatic data loading.

## Basic Usage

```vue
<template>
  <ChatLayout
    :applications="applications"
    :current-application="currentApp"
    :conversations="conversations"
    :current-conversation="currentConversation"
    :chat-list="chatList"
    :user="userInfo"
    theme="light"
    @send="handleSend"
    @select-application="handleSelectApp"
    @select-conversation="handleSelectConversation"
  />
</template>
```

## API Mode

```vue
<template>
  <ChatLayout
    :api-config="apiConfig"
    :auto-load="true"
    @data-loaded="handleDataLoaded"
  />
</template>

<script setup>
const apiConfig = {
  applicationListApi: '/api/applications',
  conversationListApi: '/api/conversations',
  conversationDetailApi: '/api/conversation/detail',
  sendMessageApi: '/api/message/send',
  userInfoApi: '/api/user/info'
}
</script>
```

## API

<PropsTable data={[
  { name: 'applications', type: 'Application[]', default: '[]', description: 'Application list' },
  { name: 'currentApplication', type: 'Application', description: 'Currently selected application' },
  { name: 'currentApplicationId', type: 'string', default: "''", description: 'Currently selected application ID (higher priority than currentApplication)' },
  { name: 'conversations', type: 'ChatConversation[]', default: '[]', description: 'Conversation list' },
  { name: 'currentConversation', type: 'ChatConversation', description: 'Currently selected conversation' },
  { name: 'currentConversationId', type: 'string', default: "''", description: 'Currently selected conversation ID (higher priority than currentConversation)' },
  { name: 'chatList', type: 'Record[]', default: '[]', description: 'Chat message list' },
  { name: 'isChatting', type: 'boolean', default: 'false', description: 'Whether chatting' },
  { name: 'user', type: 'UserInfo', default: '{}', description: 'User info' },
  { name: 'theme', type: "'light' | 'dark'", default: "'light'", description: 'Theme mode' },
  { name: 'languageOptions', type: 'LanguageOption[]', default: 'zh/en', description: 'Language options' },
  { name: 'isMobile', type: 'boolean', default: 'false', description: 'Whether mobile' },
  { name: 'logoUrl', type: 'string', default: "''", description: 'Logo URL' },
  { name: 'logoTitle', type: 'string', default: "''", description: 'Logo title' },
  { name: 'modelOptions', type: 'any[]', default: '[]', description: 'Model options' },
  { name: 'selectModel', type: 'any', description: 'Selected model' },
  { name: 'isDeepThinking', type: 'boolean', default: 'true', description: 'Enable deep thinking mode' },
  { name: 'showFullscreenButton', type: 'boolean', default: 'false', description: 'Show fullscreen button' },
  { name: 'maxAppLen', type: 'number', default: '4', description: 'Max application display count' },
  { name: 'showCloseButton', type: 'boolean', default: 'false', description: 'Show close button' },
  { name: 'aiWarningText', type: 'string', default: "'AI generated content'", description: 'AI warning text' },
  { name: 'createConversationText', type: 'string', default: "'New Chat'", description: 'New conversation text' },
  { name: 'sideI18n', type: 'object', description: 'Sidebar i18n text' },
  { name: 'chatI18n', type: 'object', description: 'Chat i18n text' },
  { name: 'chatItemI18n', type: 'object', description: 'ChatItem i18n text' },
  { name: 'senderI18n', type: 'object', description: 'Sender i18n text' },
  { name: 'apiConfig', type: 'ApiConfig', description: 'API config (enables API mode)' },
]} />

<EventsTable data={[
  { name: 'selectApplication', params: 'Application', description: 'Select application' },
  { name: 'selectConversation', params: 'ChatConversation', description: 'Select conversation' },
  { name: 'createConversation', description: 'Create conversation' },
  { name: 'toggleTheme', description: 'Toggle theme' },
  { name: 'changeLanguage', params: 'string', description: 'Change language' },
  { name: 'logout', description: 'Logout' },
  { name: 'userClick', description: 'User info click' },
  { name: 'close', description: 'Close' },
  { name: 'send', params: '(query, fileList, conversationId, applicationId)', description: 'Send message' },
  { name: 'stop', description: 'Stop generation' },
  { name: 'loadMore', params: '(conversationId, lastRecordId)', description: 'Load more' },
  { name: 'rate', params: '(conversationId, recordId, score)', description: 'Rate' },
  { name: 'share', params: '(conversationId, applicationId, recordIds)', description: 'Share' },
  { name: 'copy', params: '(rowtext, content, type)', description: 'Copy, rowtext is rendered plain text, content is raw markdown' },
  { name: 'modelChange', params: 'option', description: 'Change model' },
  { name: 'toggleDeepThinking', description: 'Toggle deep thinking' },
  { name: 'uploadFile', params: 'File[]', description: 'Upload file' },
  { name: 'startRecord', description: 'Start recording' },
  { name: 'stopRecord', description: 'Stop recording' },
  { name: 'message', params: '(code: MessageCode, message: string)', description: 'Message tip, code is message code constant' },
  { name: 'conversationChange', params: 'conversationId', description: 'Conversation change' },
  { name: 'dataLoaded', params: '(type, data)', description: 'Data loaded' },
]} />

<SlotsTable data={[
  { name: 'sider-logo', description: 'Sidebar logo area, shows external content if provided, otherwise shows default LogoArea (requires logoUrl or logoTitle)' },
  { name: 'header-fullscreen-content', description: 'Header fullscreen button area, shows external content if provided, otherwise shows default fullscreen icon (requires showFullscreenButton to be true)' },
  { name: 'header-close-content', description: 'Header close button area, shows external content if provided, otherwise shows default close icon (requires showCloseButton to be true)' },
]} />

<MethodsTable data={[
  { name: 'loadApplications', description: 'Load applications' },
  { name: 'loadConversations', description: 'Load conversations' },
  { name: 'loadConversationDetail', params: 'conversationId', description: 'Load conversation detail' },
  { name: 'loadUserInfo', description: 'Load user info' },
]} />

## Type Definitions

### ApiConfig

```typescript
interface ApiConfig {
  applicationListApi?: string;
  conversationListApi?: string;
  conversationDetailApi?: string;
  sendMessageApi?: string;
  rateApi?: string;
  shareApi?: string;
  userInfoApi?: string;
  uploadApi?: string;
}
```

### Application

```typescript
interface Application {
  ApplicationId: string;
  Name: string;
  Avatar: string;
  Greeting: string;
  OpeningQuestions: string[];
}
```

### ChatConversation

```typescript
interface ChatConversation {
  Id: string;
  AccountId: string;
  Title: string;
  LastActiveAt: number;
  CreatedAt: number;
  ApplicationId: string;
}
```

### MessageCode

Message code constants for the `code` parameter in `message` event:

```typescript
const MessageCode = {
  // Success
  COPY_SUCCESS: 'COPY_SUCCESS',
  
  // Error
  COPY_FAILED: 'COPY_FAILED',
  SHARE_FAILED: 'SHARE_FAILED',
  FILE_UPLOAD_FAILED: 'FILE_UPLOAD_FAILED',
  FILE_FORMAT_NOT_SUPPORT: 'FILE_FORMAT_NOT_SUPPORT',
  GET_APP_LIST_FAILED: 'GET_APP_LIST_FAILED',
  GET_CONVERSATION_LIST_FAILED: 'GET_CONVERSATION_LIST_FAILED',
  GET_CONVERSATION_DETAIL_FAILED: 'GET_CONVERSATION_DETAIL_FAILED',
  SEND_MESSAGE_FAILED: 'SEND_MESSAGE_FAILED',
  NETWORK_ERROR: 'NETWORK_ERROR',
  LOAD_MORE_FAILED: 'LOAD_MORE_FAILED',
  RATE_FAILED: 'RATE_FAILED',
  ASR_SERVICE_FAILED: 'ASR_SERVICE_FAILED',
  RECORD_FAILED: 'RECORD_FAILED',
  
  // Warning
  ANSWERING: 'ANSWERING',
  RECORD_TOO_LONG: 'RECORD_TOO_LONG',
} as const;

type MessageCode = typeof MessageCode[keyof typeof MessageCode];
```
