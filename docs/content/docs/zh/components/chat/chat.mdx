---
title: Chat
description: 聊天主组件
---

import { PropsTable, EventsTable, SlotsTable, MethodsTable } from '@/components/docs/api-table';

# Chat

完整的聊天界面组件，包含消息列表、发送器、分享等功能。

## 基础用法

```vue
<template>
  <Chat
    :chat-id="chatId"
    :chat-list="chatList"
    :is-chatting="isChatting"
    :current-application-id="appId"
    :current-application-name="appName"
    @send="handleSend"
    @stop="handleStop"
  />
</template>
```

## API

<PropsTable data={[
  { name: 'chatId', type: 'string', default: "''", description: '当前会话ID' },
  { name: 'chatList', type: 'Record[]', default: '[]', description: '聊天消息列表' },
  { name: 'isChatting', type: 'boolean', default: 'false', description: '是否正在聊天中' },
  { name: 'currentApplicationId', type: 'string', default: "''", description: '当前应用ID' },
  { name: 'currentApplicationAvatar', type: 'string', default: "''", description: '当前应用头像' },
  { name: 'currentApplicationName', type: 'string', default: "''", description: '当前应用名称' },
  { name: 'currentApplicationGreeting', type: 'string', default: "''", description: '当前应用欢迎语' },
  { name: 'currentApplicationOpeningQuestions', type: 'string[]', default: '[]', description: '当前应用推荐问题列表' },
  { name: 'modelOptions', type: 'any[]', default: 'defaultModelOptions', description: '模型选项列表' },
  { name: 'selectModel', type: 'any', default: 'defaultModel', description: '当前选中的模型' },
  { name: 'isDeepThinking', type: 'boolean', default: 'true', description: '是否启用深度思考模式' },
  { name: 'isMobile', type: 'boolean', default: 'false', description: '是否为移动端' },
  { name: 'theme', type: "'light' | 'dark'", default: "'light'", description: '主题模式' },
  { name: 'i18n', type: 'object', description: '国际化文本' },
  { name: 'chatItemI18n', type: 'object', description: 'ChatItem 国际化文本' },
  { name: 'senderI18n', type: 'object', description: 'Sender 国际化文本' },
]} />

### i18n 默认值

```typescript
{
  loading: '加载中',
  thinking: '思考中',
  checkAll: '全选',
  shareFor: '分享至',
  copyUrl: '复制链接',
  cancelShare: '取消分享',
  sendError: '发送失败',
  networkError: '网络错误'
}
```

<EventsTable data={[
  { name: 'send', params: '(query, fileList, conversationId, applicationId)', description: '发送消息' },
  { name: 'stop', description: '停止生成' },
  { name: 'loadMore', params: '(conversationId, lastRecordId)', description: '加载更多历史消息' },
  { name: 'rate', params: '(conversationId, recordId, score)', description: '评分（点赞/踩）' },
  { name: 'share', params: '(conversationId, applicationId, recordIds)', description: '分享消息' },
  { name: 'copy', params: '(rowtext, content, type)', description: '复制内容，rowtext为渲染后的纯文本，content为原始markdown' },
  { name: 'modelChange', params: 'option', description: '切换模型' },
  { name: 'toggleDeepThinking', description: '切换深度思考模式' },
  { name: 'uploadFile', params: 'File[]', description: '上传文件' },
  { name: 'startRecord', description: '开始录音' },
  { name: 'stopRecord', description: '停止录音' },
  { name: 'message', params: '(code: MessageCode, message: string)', description: '消息提示，code 为消息码常量' },
  { name: 'conversationChange', params: 'conversationId', description: '会话变化' },
]} />

<MethodsTable data={[
  { name: 'backToBottom', description: '滚动到底部' },
  { name: 'clearConfirm', description: '清空聊天' },
  { name: 'getSenderRef', returns: 'Ref', description: '获取发送器引用' },
]} />

## 类型定义

### MessageCode

消息码常量，用于 `message` 事件的 `code` 参数：

```typescript
const MessageCode = {
  // 成功类
  COPY_SUCCESS: 'COPY_SUCCESS',
  
  // 错误类
  COPY_FAILED: 'COPY_FAILED',
  SHARE_FAILED: 'SHARE_FAILED',
  FILE_UPLOAD_FAILED: 'FILE_UPLOAD_FAILED',
  FILE_FORMAT_NOT_SUPPORT: 'FILE_FORMAT_NOT_SUPPORT',
  GET_APP_LIST_FAILED: 'GET_APP_LIST_FAILED',
  GET_CONVERSATION_LIST_FAILED: 'GET_CONVERSATION_LIST_FAILED',
  GET_CONVERSATION_DETAIL_FAILED: 'GET_CONVERSATION_DETAIL_FAILED',
  SEND_MESSAGE_FAILED: 'SEND_MESSAGE_FAILED',
  NETWORK_ERROR: 'NETWORK_ERROR',
  LOAD_MORE_FAILED: 'LOAD_MORE_FAILED',
  RATE_FAILED: 'RATE_FAILED',
  ASR_SERVICE_FAILED: 'ASR_SERVICE_FAILED',
  RECORD_FAILED: 'RECORD_FAILED',
  
  // 警告类
  ANSWERING: 'ANSWERING',
  RECORD_TOO_LONG: 'RECORD_TOO_LONG',
} as const;

type MessageCode = typeof MessageCode[keyof typeof MessageCode];
```
